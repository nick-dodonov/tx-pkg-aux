{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        // ================ debug configurations of tx.debugTaskName (settings.json)
        {
            "name": "<user> (LLDB) (WSP)",
            "type": "lldb",
            "request": "launch",
            "program": "${workspaceFolder}/bazel-bin/${config:tx.debugTaskName}",
            "cwd": "${workspaceFolder}",
            "initCommands": [
                "platform setting -w ${workspaceFolder}",
                "command source ${env:HOME}/.lldbinit",
                "command source ${workspaceFolder}/.lldbinit",
            ],
            "preLaunchTask": "build <user>",
        },
        {
            "name": "<user> (LLDB) (Runfiles)",
            "type": "lldb",
            "request": "launch",
            "program": "${input:debugTask-output-file}",
            "cwd": "${input:debugTask-output-file}.runfiles/_main",
            "initCommands": [
                "platform setting -w ${workspaceFolder}",
                "command source ${env:HOME}/.lldbinit",
                "command source ${workspaceFolder}/.lldbinit",
            ],
            "preLaunchTask": "build <user>",
        }
    ],
    "inputs": [
        {
            "id": "debugTask-output-file",
            "type": "command",
            "command": "shellCommand.execute",  // augustocdias.tasks-shell-input extension
            "args": {
                "command": "bazel cquery --output=files ${config:tx.debugTaskName} --platform_suffix=vs",
                "cwd": "${workspaceFolder}",
                "useSingleResult": true
            }
        },
        //TODO: remove as unused after testing (including recommendations)
        {
            "id": "debugTask_RunfilesDir",
            "type": "command",
            "command": "extension.commandvariable.transform", // rioj7.command-variable extension
            "args": {
                "text": "${configExpression:debugTaskName}",
                "find": "^(.*/)(.*)$",
                "replace": "${workspaceFolder}/bazel-bin/$1$2/$2.runfiles/_main",
                "configExpression": {
                    "debugTaskName": {
                        "configVariable": "tx.debugTaskName"
                    }
                }
            }
        }
    ]
}